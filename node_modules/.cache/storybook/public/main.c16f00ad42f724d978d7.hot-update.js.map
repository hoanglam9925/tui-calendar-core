{"version":3,"file":"main.c16f00ad42f724d978d7.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;;AACA;AAAA;AAAA;AAAA;AAAA;;AACA;AAAA;AAAA;;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AAHA;AAMA;AACA;AADA;AAOA;AAEA;AACA;AACA;AACA;AAJA;AAMA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAEA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AADA;AAcA","sources":["webpack://@toast-ui/calendar/./src/components/popup/seeMoreEventsPopup.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { createPortal } from 'preact/compat';\nimport { useEffect, useRef } from 'preact/hooks';\n\nimport { HorizontalEvent } from '@src/components/events/horizontalEvent';\nimport { ClosePopupButton } from '@src/components/popup/closePopupButton';\nimport { Template } from '@src/components/template';\nimport {\n  MONTH_EVENT_HEIGHT,\n  MONTH_MORE_VIEW_HEADER_HEIGHT,\n  MONTH_MORE_VIEW_HEADER_MARGIN_BOTTOM,\n  MONTH_MORE_VIEW_HEADER_PADDING,\n  MONTH_MORE_VIEW_HEADER_PADDING_TOP,\n} from '@src/constants/style';\nimport { useStore } from '@src/contexts/calendarStore';\nimport { useEventBus } from '@src/contexts/eventBus';\nimport { useFloatingLayer } from '@src/contexts/floatingLayer';\nimport { useMonthTheme } from '@src/contexts/themeStore';\nimport { cls } from '@src/helpers/css';\nimport { seeMorePopupParamSelector } from '@src/selectors/popup';\nimport { toFormat } from '@src/time/datetime';\nimport { isNil } from '@src/utils/type';\n\nconst classNames = {\n  container: cls('see-more-container'),\n  seeMore: cls('see-more'),\n  header: cls('see-more-header'),\n  list: cls('month-more-list'),\n};\n\nexport function SeeMoreEventsPopup() {\n  const popupParams = useStore(seeMorePopupParamSelector);\n  const { date, events = [], popupPosition } = popupParams ?? {};\n  const { moreView, moreViewTitle } = useMonthTheme();\n  const seeMorePopupSlot = useFloatingLayer('seeMorePopupSlot');\n  const eventBus = useEventBus();\n  const moreEventsPopupContainerRef = useRef(null);\n  const isHidden = isNil(date) || isNil(popupPosition) || isNil(seeMorePopupSlot);\n\n  useEffect(() => {\n    if (!isHidden && moreEventsPopupContainerRef.current) {\n      eventBus.fire('clickMoreEventsBtn', {\n        date: date.toDate(),\n        target: moreEventsPopupContainerRef.current,\n      });\n    }\n  }, [date, eventBus, isHidden]);\n\n  if (isHidden) {\n    return null;\n  }\n\n  const style = {\n    height: MONTH_MORE_VIEW_HEADER_HEIGHT,\n    marginBottom: MONTH_MORE_VIEW_HEADER_MARGIN_BOTTOM,\n    padding: MONTH_MORE_VIEW_HEADER_PADDING,\n    backgroundColor: moreViewTitle.backgroundColor,\n  };\n\n  const moreTitle = {\n    ymd: toFormat(date, 'YYYY-MM-DD'),\n    day: date.getDay(),\n    date: date.getDate().toString().padStart(2, '0'),\n  };\n\n  const moreViewListStyle = {\n    height: `calc(100% - ${\n      MONTH_MORE_VIEW_HEADER_HEIGHT +\n      MONTH_MORE_VIEW_HEADER_MARGIN_BOTTOM +\n      MONTH_MORE_VIEW_HEADER_PADDING_TOP\n    }px)`,\n  };\n  return createPortal(\n    <div\n      role=\"dialog\"\n      className={classNames.container}\n      style={popupPosition}\n      ref={moreEventsPopupContainerRef}\n    >\n      <div className={classNames.seeMore} style={moreView}>\n        <div className={classNames.header} style={style}>\n          <Template template=\"monthMoreTitleDate\" param={moreTitle} />\n          <ClosePopupButton type=\"moreEvents\" />\n        </div>\n        <div className={classNames.list} style={moreViewListStyle}>\n          {events.map((uiModel) => (\n            <HorizontalEvent\n              key={`see-more-event-item-${uiModel.cid()}`}\n              uiModel={uiModel}\n              eventHeight={MONTH_EVENT_HEIGHT}\n              headerHeight={MONTH_MORE_VIEW_HEADER_HEIGHT}\n              flat={true}\n            />\n          ))}\n        </div>\n      </div>\n    </div>,\n    seeMorePopupSlot\n  );\n}\n"],"names":[],"sourceRoot":""}